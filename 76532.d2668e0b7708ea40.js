"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76532],{60165:function(e,t,r){var s=r(85893),i=r(67294),o=r(95914);let n=i.memo(e=>(0,s.jsxs)(o.Z,{...e,viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V16C22 17.6569 20.6569 19 19 19H8.55397C8.37272 19 8.19489 19.0493 8.03947 19.1425L3.5145 21.8575C3.20556 22.0429 2.82081 22.0477 2.5073 21.8702C2.19379 21.6927 2 21.3603 2 21V5ZM5 4C4.44772 4 4 4.44772 4 5V19.2338L7.01048 17.4275C7.47673 17.1478 8.01024 17 8.55397 17H19C19.5523 17 20 16.5523 20 16V5C20 4.44772 19.5523 4 19 4H5Z"}),(0,s.jsx)("path",{d:"M11 7C11 6.44772 11.4477 6 12 6C12.5523 6 13 6.44772 13 7V11C13 11.5523 12.5523 12 12 12C11.4477 12 11 11.5523 11 11V7Z"}),(0,s.jsx)("path",{d:"M11 14C11 13.4477 11.4477 13 12 13C12.5523 13 13 13.4477 13 14C13 14.5523 12.5523 15 12 15C11.4477 15 11 14.5523 11 14Z"})]}));t.Z=n},46828:function(e,t,r){var s=r(85893),i=r(67294),o=r(95914);let n=i.memo(e=>(0,s.jsxs)(o.Z,{...e,viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 10C4.89543 10 4 10.8954 4 12C4 13.1046 4.89543 14 6 14C7.10457 14 8 13.1046 8 12C8 10.8954 7.10457 10 6 10ZM2 12C2 9.79086 3.79086 8 6 8C8.20914 8 10 9.79086 10 12C10 14.2091 8.20914 16 6 16C3.79086 16 2 14.2091 2 12Z"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4C16.8954 4 16 4.89543 16 6C16 7.10457 16.8954 8 18 8C19.1046 8 20 7.10457 20 6C20 4.89543 19.1046 4 18 4ZM14 6C14 3.79086 15.7909 2 18 2C20.2091 2 22 3.79086 22 6C22 8.20914 20.2091 10 18 10C15.7909 10 14 8.20914 14 6Z"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 16C16.8954 16 16 16.8954 16 18C16 19.1046 16.8954 20 18 20C19.1046 20 20 19.1046 20 18C20 16.8954 19.1046 16 18 16ZM14 18C14 15.7909 15.7909 14 18 14C20.2091 14 22 15.7909 22 18C22 20.2091 20.2091 22 18 22C15.7909 22 14 20.2091 14 18Z"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5528 17.8944L7.5528 13.8944L8.44722 12.1056L16.4472 16.1056L15.5528 17.8944Z"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.4472 11.8944L16.4472 7.89443L15.5528 6.10558L7.55278 10.1056L8.4472 11.8944Z"})]}));t.Z=n},29874:function(e,t,r){var s=r(85893),i=r(67294),o=r(95914);let n=i.memo(e=>(0,s.jsx)(o.Z,{...e,viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1051 3.90453C10.1051 2.84042 10.9755 2 12.0215 2H12.1183C13.7773 2 15.1446 3.33088 15.1446 5V9H18.9711C21.2014 9 22.6959 11.3321 21.6755 13.3463L18.1295 20.3463C17.6137 21.3646 16.5645 22 15.4251 22H11.3546C11.1082 22 10.8627 21.9702 10.6236 21.9112L6.93101 21H5.02628C3.36726 21 2 19.6691 2 18V12C2 10.3309 3.36726 9 5.02628 9H7.19669L9.66081 5.35177C9.95107 4.92203 10.1051 4.41848 10.1051 3.90453ZM6.05257 11H5.02628C4.44713 11 4 11.46 4 12V18C4 18.54 4.44713 19 5.02628 19H6.05257V11ZM8.05257 19.2168V11.3061L11.3182 6.47121C11.8129 5.73871 12.0857 4.88122 12.1041 4H12.1183C12.6974 4 13.1446 4.45998 13.1446 5V9H12.1183C11.566 9 11.1183 9.44772 11.1183 10C11.1183 10.5523 11.566 11 12.1183 11H18.9711C19.7534 11 20.2183 11.7971 19.8914 12.4425L16.3454 19.4425C16.1747 19.7794 15.8207 20 15.4251 20H11.3546C11.2696 20 11.185 19.9897 11.1027 19.9694L8.05257 19.2168Z"})}));t.Z=n},79579:function(e,t,r){r.d(t,{Z:function(){return _}});var s,i,o=r(85893),n=r(67294),a=r(81719),l=r(3411),d=r(32350),m=r(95914);let c=n.memo(e=>(0,o.jsx)(m.Z,{...e,viewBox:"0 0 24 24",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57484 4C8.17921 4 7.82522 4.22056 7.65455 4.55747L4.10855 11.5575C3.78161 12.2029 4.24657 13 5.02885 13H11.8817C12.434 13 12.8817 13.4477 12.8817 14C12.8817 14.5523 12.434 15 11.8817 15H10.8554V19C10.8554 19.54 11.3025 20 11.8817 20H11.8958C11.9142 19.1188 12.187 18.2613 12.6818 17.5288L15.9474 12.6939V4.78324L12.8972 4.03059C12.815 4.01029 12.7304 4 12.6454 4H8.57484ZM17.9474 5V13H18.9737C19.5528 13 19.9999 12.54 19.9999 12V6C19.9999 5.45998 19.5528 5 18.9737 5H17.9474ZM16.8033 15L14.3391 18.6482C14.0489 19.078 13.8948 19.5815 13.8948 20.0955C13.8948 21.1596 13.0245 22 11.9784 22H11.8817C10.2226 22 8.85538 20.6691 8.85538 19V15H5.02885C2.79852 15 1.30407 12.6679 2.32441 10.6537L5.87041 3.65368C6.38621 2.63545 7.43548 2 8.57484 2H12.6454C12.8917 2 13.1372 2.02982 13.3764 2.08884L17.0689 3H18.9737C20.6327 3 21.9999 4.33087 21.9999 6V12C21.9999 13.6691 20.6327 15 18.9737 15H16.8033Z"})}));var h=r(29874),p=r(7327);let f=(0,a.ZP)(p.Sn,{shouldForwardProp:e=>"clicked"!==e&&"voteVariant"!==e})(e=>{let{theme:{breakpoints:t,spacing:r},clicked:s,voteVariant:i}=e;return{padding:r(1.25),fontWeight:"normal",color:l.D.white[100],[t.down("sm")]:{fontSize:d.CH.bodySmall},"&:active":{color:l.D.white[100]},...s&&{color:"like"===i?`${l.D.success[100]} !important`:`${l.D.alert[100]} !important`}}}),u=e=>{let{palette:t,breakpoints:r,spacing:s}=e;return{color:t.primary.contrastText,marginRight:s(1),[r.down("sm")]:{marginRight:s(.5)}}},C=(0,a.ZP)(c,{shouldForwardProp:e=>"clicked"!==e})(e=>{let{theme:t,clicked:r}=e;return{...u(t),...r&&{color:`${l.D.alert[100]} !important`}}}),g=(0,a.ZP)(h.Z,{shouldForwardProp:e=>"clicked"!==e})(e=>{let{theme:t,clicked:r}=e;return{...u(t),...r&&{color:`${l.D.success[100]} !important`}}}),v=(0,a.ZP)("div")(()=>({alignItems:"center",display:"flex",justifyContent:"center"})),x=(0,a.ZP)("span")({fontSize:12,fontWeight:700,textTransform:"none",marginLeft:8});(s=i||(i={}))[s.CANCEL=0]="CANCEL",s[s.POSITIVE=1]="POSITIVE",s[s.NEGATIVE=-1]="NEGATIVE";var k=r(19167),b=r(84973),w=r(70133),j=r(98718),V=r(89950),Z=r(86650),L=r(92113),E=r(62097),y=r(74040),F=r(69037);let S=n.memo(e=>(0,o.jsx)(m.Z,{...e,viewBox:"0 0 24 24",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.04445 3C6.66359 3 5.53468 3.29654 4.63432 3.82463C3.73186 4.35395 3.11419 5.08371 2.70912 5.86217C1.91829 7.38195 1.92575 9.0998 2.11858 10.0865C2.62052 12.655 4.41942 15.3472 6.3037 17.3581C7.25773 18.3762 8.27078 19.26 9.21577 19.8976C10.1115 20.502 11.1112 21 12 21C12.8888 21 13.8885 20.502 14.7842 19.8976C15.7292 19.26 16.7423 18.3762 17.6963 17.3581C19.5806 15.3472 21.3795 12.655 21.8814 10.0865C22.0743 9.0998 22.0817 7.38195 21.2909 5.86217C20.8858 5.08371 20.2682 4.35395 19.3657 3.82463C18.4653 3.29654 17.3364 3 15.9556 3C14.8581 3 13.9104 3.49559 13.1784 4.11305C12.7259 4.49473 12.3303 4.94327 12 5.40732C11.6697 4.94327 11.2741 4.49473 10.8216 4.11305C10.0896 3.49559 9.14193 3 8.04445 3Z"})}));var M=r(23180),I=r(58362);let D="#e2264d",H=(0,a.ZP)("div",{shouldForwardProp:e=>"isClicked"!==e&&"isStaticFavourite"!==e})(e=>{let{isClicked:t,isStaticFavourite:r}=e;return{display:"flex",justifyContent:"center",fontSize:24,span:{display:"flex",justifyContent:"center",...r&&t&&{color:D},userSelect:"none",cursor:"pointer",...t&&!r&&{color:D,filter:"none",willChange:"font-size",svg:{animation:"heart 1s cubic-bezier(0.17, 0.89, 0.32, 1.49)"}}},"span:before, span:after":{position:"absolute",zIndex:10,top:"50%",left:"50%",borderRadius:"50%",content:"''",...t&&!r&&{animation:"rest 1s cubic-bezier(0.17, 0.89, 0.32, 1.49)",animationTimingFunction:"ease-out"}},"span:before":{boxSizing:"border-box",margin:"-1.6875rem",border:`solid 2.25rem ${D}`,width:"3.375rem",height:"3.375rem",transform:"scale(0)",...t&&!r&&{willChange:"transform, border-width, border-color",animationName:"bubble"}},"span:after":{margin:"-2.25px",width:"0.28125rem",height:"0.28125rem",boxShadow:`0.32476rem -3rem 0 -0.1875rem #ff8080,
      -0.32476rem -2.625rem 0 -0.1875rem #ffed80,
      2.54798rem -1.61656rem 0 -0.1875rem #ffed80,
      1.84982rem -1.89057rem 0 -0.1875rem #a4ff80,
      2.85252rem 0.98418rem 0 -0.1875rem #a4ff80,
      2.63145rem 0.2675rem 0 -0.1875rem #80ffc8,
      1.00905rem 2.84381rem 0 -0.1875rem #80ffc8,
      1.43154rem 2.22414rem 0 -0.1875rem #80c8ff,
      -1.59425rem 2.562rem 0 -0.1875rem #80c8ff,
      -0.84635rem 2.50595rem 0 -0.1875rem #a480ff,
      -2.99705rem 0.35095rem 0 -0.1875rem #a480ff,
      -2.48692rem 0.90073rem 0 -0.1875rem #ff80ed,
      -2.14301rem -2.12438rem 0 -0.1875rem #ff80ed,
      -2.25479rem -1.38275rem 0 -0.1875rem #ff8080`,...t&&!r&&{willChange:" opacity, box-shadow",animationName:"sparkles"}},"@keyframes heart":{"0%, 17.5%":{transform:"scale(0)"}},"@keyframes rest":{"0%, 17.5%":{fontSize:0}},"@keyframes bubble":{"15%":{transform:"scale(1)",borderColor:"#cc8ef5",borderWidth:"1.6875rem"},"30%,100%":{transform:"scale(1)",borderColor:"#cc8ef5",borderWidth:0}},"@keyframes sparkles":{"0%,20%":{opacity:0},"25%":{opacity:1,boxShadow:`0.32476rem -2.4375rem 0 0rem #ff8080,
          -0.32476rem -2.0625rem 0 0rem #ffed80,
          2.1082rem -1.26585rem 0 0rem #ffed80,
          1.41004rem -1.53985rem 0 0rem #a4ff80,
          2.30412rem 0.85901rem 0 0rem #a4ff80, 2.08305rem 0.14233rem 0 0rem #80ffc8,
          0.76499rem 2.33702rem 0 0rem #80ffc8, 1.18748rem 1.71734rem 0 0rem #80c8ff,
          -1.35019rem 2.0552rem 0 0rem #80c8ff,
          -0.60229rem 1.99916rem 0 0rem #a480ff,
          -2.44865rem 0.22578rem 0 0rem #a480ff,
          -1.93852rem 0.77557rem 0 0rem #ff80ed,
          -1.70323rem -1.77366rem 0 0rem #ff80ed,
          -1.81501rem -1.03204rem 0 0rem #ff8080`}}}});var T=r(94745);let A=e=>{let{game:t,addLabel:r}=e,{spacing:s}=(0,E.Z)(),{favourites:i,addToFavourite:a,removeFromFavourite:l}=(0,n.useContext)(I.Q),{user:d}=(0,n.useContext)(y.S),{openDrawer:m}=(0,n.useContext)(M.s9),[c,h]=(0,n.useState)(!0),p=i.some(e=>e.slug===t.slug),f=()=>{if(!d){m("myGames");return}h(!1),p?l(t.id):a({id:t.id,slug:t.slug,name:t.slug,cover:t.cover,videos:t.videos,status:t.status,iosFriendly:!0,androidFriendly:!0,mobileFriendly:!0,gameThumbLabels:[]})};return(0,o.jsx)(j.Z,{children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:s(),paddingRight:s(),width:44,height:44,position:"relative"},onClick:f,children:[(0,o.jsx)(H,{isStaticFavourite:c,isClicked:p,children:(0,o.jsx)("span",{children:p?(0,o.jsx)(S,{}):(0,o.jsx)(F.Z,{})})}),r&&(0,o.jsx)(T.cC,{id:"common.favouriteButton"})]})})};var P=r(14412),R=r(60165),N=r(36506),G=r(88650),U=r(25345),z=r(43740);let W=e=>{let{enabled:t,onExit:r,onMainAction:s}=e,[i,a]=n.useState(!1);return(n.useEffect(()=>{a(t)},[t]),i&&t)?(0,o.jsxs)("div",{style:{width:300,height:96,position:"absolute",top:-101,left:-122,background:l.D.black[60],color:"white",textAlign:"center",borderRadius:"20px",zIndex:1,padding:"16px 16px 10px 16px",fontWeight:700,fontSize:16},children:[(0,o.jsx)(z.Z,{sx:{position:"absolute",right:10,top:10},onClick:r}),(0,o.jsx)(T.cC,{id:"game.mobile.dislikeFeedback.title"}),":",(0,o.jsx)(p.Sn,{variant:"contained",height:40,style:{height:40,width:"100%",margin:"4px 0px 0px 0px",fontWeight:700,fontSize:16},onClick:s,children:(0,o.jsx)(T.cC,{id:"game.mobile.dislikeFeedback.action"})})]}):null},B=e=>`vote-${e.slug}`,O=e=>{let t=B(e),r=k.Z.Instance.getItem(t);if(!r)return i.CANCEL;try{let e=parseInt(r,10);switch(e){case i.CANCEL:case i.POSITIVE:case i.NEGATIVE:return e;default:return i.CANCEL}}catch(e){return i.CANCEL}};class $ extends n.Component{constructor(e){super(e),this.state={vote:i.CANCEL,showGameFeedbackModal:!1,dislikeFeedbackEnabled:!1}}componentDidMount(){window.addEventListener("message",this.processMessage);let e=O(this.props.game);e!==i.CANCEL&&this.setState({vote:e})}componentWillUnmount(){window.removeEventListener("message",this.processMessage)}componentDidUpdate(e){e.game.slug!==this.props.game.slug&&this.setState({vote:O(this.props.game)})}processMessage=e=>{if(!e.data||e.data.type!==V.V)return;let{game:t,routeHelper:r}=this.props,s=r.isMessageFromGameframe(e,t.desktopUrl);if(s){if("like"===e.data.event)this.upVote();else if("dislike"===e.data.event)this.downVote();else if("neutral"===e.data.event)this.neutralVote();else if("feedback"===e.data.event){let t=e.data.source;"dislike"===t?this.showFeedbackDrawer("gfDislikeFeedback"):"feedbackButton"===t?this.showFeedbackDrawer("gfFeedback"):(console.error("Missing feedback event source from GF"),this.showFeedbackDrawer("unknown"))}}};render(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(j.Z,{children:[this.renderUpVotes(),this.renderDownVotes(),(0,o.jsx)(A,{game:this.props.game,addLabel:!!this.props.addAllLabels}),(0,o.jsx)(P.Z,{orientation:"vertical",sx:{mx:1.25,height:20}}),this.feedback()]})})}renderDownVotes(){let e=this.state.vote===i.NEGATIVE;return(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(W,{enabled:this.state.dislikeFeedbackEnabled,onExit:this.onExitDislikePopup,onMainAction:this.onMainActionDislikePopup}),(0,o.jsxs)(f,{voteVariant:"dislike",clicked:e,isDesktop:!1,onClick:()=>e?this.neutralVote():this.downVote(),children:[(0,o.jsx)(C,{clicked:e}),this.getDownvotes()]})]})}onExitDislikePopup=()=>{this.setState({dislikeFeedbackEnabled:!1})};onMainActionDislikePopup=()=>{this.showFeedbackDrawer("gfDislikeFeedback"),this.setState({dislikeFeedbackEnabled:!1})};renderUpVotes(){let e=this.state.vote===i.POSITIVE;return(0,o.jsxs)(f,{sx:{ml:-1},voteVariant:"like",clicked:e,isDesktop:!1,onClick:()=>e?this.neutralVote():this.upVote(),children:[(0,o.jsx)(g,{clicked:e}),this.getUpvotes()]})}feedback(){if("en-US"===this.props.locale)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(v,{onClick:()=>this.showFeedbackDrawer("mobileGamePage"),children:[(0,o.jsx)(R.Z,{}),(0,o.jsx)(x,{children:this.props.i18n._({id:"game.feedback"})})]}),(0,o.jsx)(P.Z,{orientation:"vertical",sx:{mx:1.25,height:20}})]})}getUpvotes(){let{game:e,i18n:t}=this.props,{vote:r}=this.state,s=e.upvotes;return r===i.POSITIVE&&(s=e.upvotes+1),(0,L.Z)(t,s,{notation:"compact"})}getDownvotes(){let{game:e,i18n:t}=this.props,{vote:r}=this.state,s=e.downvotes;return r===i.NEGATIVE&&(s=e.downvotes+1),(0,L.Z)(t,s,{notation:"compact"})}upVote=async()=>{let{userLiked:e}=this.props;return e.addToLiked({id:this.props.game.id,slug:this.props.game.slug,name:this.props.game.slug,cover:this.props.game.cover,videos:this.props.game.videos,status:this.props.game.status,iosFriendly:!0,androidFriendly:!0,mobileFriendly:!0,gameThumbLabels:[],playedTime:null}).catch(e=>{console.error("[UserLiked] error while adding to liked",e)}),this.vote(i.POSITIVE)};downVote=async()=>{let{userLiked:e}=this.props;e.removeFromLiked(this.props.game.id).catch(e=>{console.error("[UserLiked] error while removing from liked",e)}),this.vote(i.NEGATIVE)};neutralVote=async()=>{let{userLiked:e}=this.props;e.removeFromLiked(this.props.game.id).catch(e=>{console.error("[UserLiked] error while removing from liked",e)}),this.vote(i.CANCEL)};async vote(e){let{services:t,game:r}=this.props,{gameService:s,userInfoService:o}=t;this.saveVoteInStorage(e),t.crazyAnalyticsService.gameVote(e),this.setState({vote:e,dislikeFeedbackEnabled:e===i.NEGATIVE});let n=await o.getUserInfo();try{await s.vote(r.slug,e,n)}catch(e){console.error("[GameContainerTools] error while voting",e)}}saveVoteInStorage(e){let t=k.Z.Instance,r=B(this.props.game);e===i.CANCEL?t.removeItem(r):t.setItem(r,`${e}`)}showFeedbackDrawer=e=>{this.props.feedbackContext.openFeedbackDrawer("game",{feedbackSource:e,gameFeedbackOptions:{game:this.props.game,mountedTime:this.props.gamePageGameContext.mountedTime||void 0}})}}var _=(0,U.Hz)(function(e){let t=t=>{let r=n.useContext(G.l);return(0,o.jsx)(e,{feedbackContext:r,...t})};return t}((0,w.Z)((0,b.Z)((0,Z.mX)((0,N.G)()($))))))},14477:function(e,t,r){var s=r(85893),i=r(5152),o=r.n(i),n=r(67294),a=r(94745),l=r(70133),d=r(89950),m=r(46828),c=r(92975),h=r(7327);let p=o()(()=>Promise.all([r.e(19541),r.e(46813),r.e(10461),r.e(33204)]).then(r.bind(r,33204)),{loadableGenerated:{webpack:()=>[33204]}});class f extends n.Component{constructor(e){super(e),this.state={open:!1}}render(){let{isDesktop:e}=this.props.deviceType;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(h.Sn,{sx:{px:e?2:0},onClick:this.open,variant:e?"contained":"link",color:e?"grey":"white",children:[(0,s.jsx)(m.Z,{}),(e||this.props.addLabel)&&(0,s.jsx)("span",{children:(0,s.jsx)(a.cC,{id:"game.share.button"})})]}),this.renderModal()]})}componentDidMount(){window.addEventListener("message",this.processMessage)}componentWillUnmount(){window.removeEventListener("message",this.processMessage)}processMessage=e=>{if(!e.data||e.data.type!==d.V)return;let{game:t,routeHelper:r}=this.props,s=r.isMessageFromGameframe(e,t.desktopUrl);s&&"share"===e.data.event&&this.open()};renderModal(){let{open:e}=this.state;if(!e)return null;let{game:t}=this.props;return(0,s.jsx)(p,{game:t,onClose:this.close})}open=async()=>{let e=window.navigator.canShare&&window.navigator.canShare();if(window.navigator.share&&!1!==e)try{await window.navigator.share({title:this.props.game.name,url:window.location.href})}catch(e){console.log("User has aborted share",e)}else this.setState({open:!0})};close=()=>{this.setState({open:!1})}}t.Z=(0,l.Z)((0,c.Z)(f))},36506:function(e,t,r){r.d(t,{G:function(){return o}});var s=r(85893);r(67294);var i=r(94745);function o(e){return e=>t=>{let{i18n:r}=(0,i.mV)();return(0,s.jsx)(e,{...t,i18n:r})}}}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92977,81747],{92977:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(85893),l=n(67294),a=n(11163),o=n(70754),i=n(63306),s=n(69626),c=n(89950),u=n(3411),d=n(83514),f=n(37899),h=n(23500),w=n(22662),p=n(4235),m=n(49397),g=n(3242),v=n(81719);let y=(0,v.ZP)("div")(e=>{let{theme:{breakpoints:t,dimensions:n,spacing:r}}=e;return{width:"100%",height:"100%",[t.down("gp_x6")]:{height:`min(calc(100vh - ${n.header.height}px - ${r(2)}),56vw)`}}});var x=n(46413);let b=e=>{let{game:t,overrideContainerCss:n}=e,v=l.useRef(null),b=l.useRef(null),[k,Z]=l.useState("loading"),{routeHelper:S}=l.useContext(i.Z),{pageUrlHelper:C}=l.useContext(d.t),{services:E}=l.useContext(f.Z);l.useEffect(()=>{let e=e=>{let t=new URL(e,window.location.href);window.location.href!==t.toString()&&Z("disabled")};return a.Router.events.on("routeChangeStart",e),function(){a.Router.events.off("routeChangeStart",e)}},[]),l.useEffect(()=>{let e=e=>{let n;if(!e.data||e.data.type!==c.V||!e.origin)return;try{n=new URL(e.origin)}catch(e){return}let r=S.isMessageFromGameframe(e,t.desktopUrl),l=n.hostname===window.location.hostname;if(r||l)switch(e.data.event){case"happytime":(0,h.Z)(E.userInfoService).catch(e=>{console.error(e)});break;case"inviteLink":let a=e.data.url;try{window.history.replaceState({path:a},document.title,a)}catch(e){console.error(e)}break;case"exitFullscreen":x.Z.exitNativeFullscreen()}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[t.desktopUrl,E,S]),l.useEffect(()=>{let e=()=>{b.current&&b.current.contentWindow?.postMessage("tcf-loaded","*")};return(0,s.a)().addInstallListener(e),Z("enabled"),function(){(0,s.a)().removeInstallListener(e),(0,g.iA)()}},[]);let L={position:"relative",width:"100%",height:"100%",backgroundColor:u.D.black[90]};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{style:n,children:(0,r.jsx)("div",{className:"GameContainer",ref:v,style:L,children:(()=>{if("disabled"===k)return null;if("loading"===k)return(0,r.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(o.Z,{disableShrink:!0,sx:{color:"white"}})});let e=(0,m.Z)(t),n=t.seoDescription?{dangerouslySetInnerHTML:{__html:t.seoDescription}}:{},l=t.allowWebCam?"camera;":"",a=S&&C?S.gameIframeUrl(t.desktopUrl,C.filteredQueryParams()):null;return a?(0,r.jsx)("iframe",{id:p.x,src:a,title:t.name,scrolling:"no",allow:`autoplay; payment; fullscreen; microphone; focus-without-user-activation *; screen-wake-lock; gamepad; clipboard-read; clipboard-write; accelerometer; gyroscope; ${l}`,allowFullScreen:!0,ref:b,sandbox:e,loading:"eager",importance:"high",...n,"data-hj-allow-iframe":!0,style:{border:0,margin:0,padding:0,width:"100%",height:"100%",position:"absolute",top:0,left:0}},t.slug):null})()})}),(0,r.jsx)(w.Z,{})]})};var k=b},22662:function(e,t,n){var r=n(67294),l=n(46413),a=n(37899);let o=()=>{let e=r.useContext(a.Z).services;return r.useEffect(()=>{let t=()=>{l.Z.isFullscreen()?e.crazyAnalyticsService.displayEvent("fullscreen","enter"):e.crazyAnalyticsService.displayEvent("fullscreen","exit")};l.Z.addFullscreenListener(t);let n=()=>l.Z.removeFullscreenListener(t);return n},[e.crazyAnalyticsService]),null};t.Z=o},49397:function(e,t){t.Z=function(e){if(e.sandbox){let t="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-scripts allow-same-origin allow-downloads ";return e.disallowSandboxPopups||(t+=" allow-popups allow-popups-to-escape-sandbox"),t}}}}]);